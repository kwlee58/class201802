knitr::opts_chunk$set(echo = TRUE)
# install.packages("pander", repos = "https://cran.rstudio.com")
# install.packages("xlsx", repos = "https://cran.rstudio.com")
# install.packages("readr", repos = "https://cran/rstudio.com")
library(xlsx)
library(pander)
library(knitr)
library(readr)
panderOptions('table.split.table', Inf)
options(width = 180)
load("./red_and_black_180901_data.RData")
class_roll0901 <- class_roll
nrow(class_roll0901)
names(class_roll0901)
load("./red_and_black_180901_data.RData")
class_roll0901 <- class_roll
nrow(class_roll0901)
class_roll <- read.xlsx("../data/class_roll0904.xlsx",
sheetIndex = 1,
startRow = 2,
endRow = 181,
colIndex = c(3:7, 9),
colClasses = rep("character", 6),
encoding = "UTF-8",
stringsAsFactors = FALSE)
nrow(class_roll)
nrow(class_roll0901)
names(class_roll) <- c("dept", "id", "name", "year", "e.mail", "cell.no")
class_roll0901$mark1 <- "0901"
class_roll$mark3 <- "0904"
class_roll.merged.0901 <- merge(class_roll, class_roll0901,
by = "id",
all = TRUE)
nrow(class_roll.merged.0901)
# str(class_roll.merged.0901)
pander(class_roll.merged.0901[, c("group", "mark1", "mark2")])
# str(class_roll.merged.0901)
pander(class_roll.merged.0901[, c("group", "mark1", "mark3")])
load("./red_and_black_180901_data.RData")
class_roll0901 <- class_roll
nrow(class_roll0901)
class_roll <- read.xlsx("../data/class_roll0904.xlsx",
sheetIndex = 1,
startRow = 2,
endRow = 181,
colIndex = c(3:7, 9),
colClasses = rep("character", 6),
encoding = "UTF-8",
stringsAsFactors = FALSE)
nrow(class_roll)
nrow(class_roll0901)
names(class_roll) <- c("dept", "id", "name", "year", "e.mail", "cell.no")
class_roll0901$mark1 <- "0901"
class_roll$mark2 <- "0904"
class_roll.merged.0901 <- merge(class_roll, class_roll0901,
by = "id",
all = TRUE)
nrow(class_roll.merged.0901)
pander(class_roll.merged.0901[, c("group", "mark1", "mark2")])
load("./red_and_black_180901_data.RData")
class_roll0901 <- class_roll
nrow(class_roll0901)
class_roll <- read.xlsx("../data/class_roll0904.xlsx",
sheetIndex = 1,
startRow = 2,
endRow = 181,
colIndex = c(3:7, 9),
colClasses = rep("character", 6),
encoding = "UTF-8",
stringsAsFactors = FALSE)
nrow(class_roll)
nrow(class_roll0901)
names(class_roll) <- c("dept", "id", "name", "year", "e.mail", "cell.no")
class_roll0901$mark1 <- "0901"
class_roll$mark2 <- "0904"
class_roll.merged <- merge(class_roll, class_roll0901,
by = "id",
all = TRUE)
nrow(class_roll.merged)
pander(class_roll.merged[, c("group", "mark1", "mark2")])
pander(class_roll.merged[is.na(class_roll.merged$mark2),
c("group", "mark1", "mark2")])
table(class_roll.merged[is.na(class_roll.merged$mark2), ]$group)
id0901 <- class_roll0901$id
id0904 <- class_roll$id
stay0904 <- intersect(id0901, id0904)
length(stay0904)
# stay <- intersect(intersect(id0901, id0901), id0904)
# stay02 <- intersect(id0901, id0904)
# stay == stay02
new_id <- setdiff(id0904, stay0904)
new_id
# stay <- intersect(intersect(id0901, id0901), id0904)
# stay02 <- intersect(id0901, id0904)
# stay == stay02
new_id <- setdiff(id0904, id0901)
new_id
class_roll.stay <- subset(class_roll, id %in% stay0904)
class_roll.new <- subset(class_roll, id %in% new_id)
intersect(class_roll.stay, class_roll.new)
union(class_roll.stay, class_roll.new)
?intersect
union(stay0904, new_id)
setequal(union(stay0904, new_id), class_roll$id)
load("./red_and_black_180901_data.RData")
class_roll0901 <- class_roll
nrow(class_roll0901)
class_roll <- read.xlsx("../data/class_roll0904.xlsx",
sheetIndex = 1,
startRow = 2,
endRow = 181,
colIndex = c(3:7, 9),
colClasses = rep("character", 6),
encoding = "UTF-8",
stringsAsFactors = FALSE)
nrow(class_roll)
nrow(class_roll0901)
names(class_roll) <- c("dept", "id", "name", "year", "e.mail", "cell.no")
class_roll0901$mark1 <- "0901"
class_roll$mark2 <- "0904"
class_roll.merged <- merge(class_roll, class_roll0901,
by = "id",
all = TRUE)
nrow(class_roll.merged)
pander(class_roll.merged[, c("group", "mark1", "mark2")])
pander(class_roll.merged[is.na(class_roll.merged$mark2),
c("group", "mark1", "mark2")])
table(class_roll.merged[is.na(class_roll.merged$mark2), ]$group)
id0901 <- class_roll0901$id
id0904 <- class_roll$id
stay0904 <- intersect(id0901, id0904)
length(stay0904)
# stay <- intersect(intersect(id0901, id0901), id0904)
# stay02 <- intersect(id0901, id0904)
# stay == stay02
new_id <- setdiff(id0904, id0901)
class_roll.stay <- subset(class_roll, id %in% stay0904)
class_roll.new <- subset(class_roll, id %in% new_id)
# pander(class_roll.stay)
# pander(class_roll.new)
str(class_roll)
str(class_roll.stay)
str(class_roll.new)
str(class_roll)
id0901 <- class_roll0901$id
id0904 <- class_roll$id
stay0904 <- intersect(id0901, id0904)
length(stay0904)
# stay <- intersect(intersect(id0901, id0901), id0904)
# stay02 <- intersect(id0901, id0904)
# stay == stay02
new_id <- setdiff(id0904, id0901)
class_roll.stay <- subset(class_roll0901, id %in% stay0904)
class_roll.new <- subset(class_roll, id %in% new_id)
# pander(class_roll.stay)
# pander(class_roll.new)
str(class_roll.stay)
str(class_roll.new)
str(class_roll)
N <- nrow(class_roll.new)
N_red <- sample(1:N, size = 9)
N_red
set.seed(1)
N <- nrow(class_roll.new)
id_red <- sample(1:N, size = 9)
id_black <- setdiff(1:N, id_red)
class_roll.new$group <- ifelse(1:N %in% id_red, "Red", "Black")
# class_roll.new$group <- sample(1:N) %% 2 + 1
class_roll.new$group <- factor(class_roll.new$group,
labels = c("Red", "Black"))
class_roll.new <- class_roll.new[, c(1:6, 8, 7)]
names(class_roll.stay)[8] <- "mark"
names(class_roll.new)[8] <- "mark"
red.id <- which(class_roll.new$group == "Red")
black.id <- which(class_roll.new$group == "Black")
class_roll <- rbind(class_roll.stay, class_roll.new)
id0901 <- class_roll0901$id
id0904 <- class_roll$id
stay0904 <- intersect(id0901, id0904)
length(stay0904)
new_id <- setdiff(id0904, id0901)
class_roll.stay <- subset(class_roll0901, id %in% stay0904)
class_roll.new <- subset(class_roll, id %in% new_id)
str(class_roll.stay)
str(class_roll.out)
class_roll.out <- class_roll.merged[is.na(class_roll.merged$mark2), ]
pander(class_roll.out[, c("group", "mark1", "mark2")])
pander(table(class_roll.out$group))
id0901 <- class_roll0901$id
id0904 <- class_roll$id
stay0904 <- intersect(id0901, id0904)
length(stay0904)
new_id <- setdiff(id0904, id0901)
class_roll.stay <- subset(class_roll0901, id %in% stay0904)
class_roll.new <- subset(class_roll, id %in% new_id)
str(class_roll.stay)
str(class_roll.out)
str(class_roll.new)
str(class_roll)
?ifelse
class_roll.out
class_roll.merged
merge(class_roll, class_roll0901)
nrow(merge(class_roll, class_roll0901))
nrow(merge(class_roll, class_roll0901, by = "id", all = FALSE))
?merge
merge(class_roll, class_roll0901, all = TRUE)
nrow(merge(class_roll, class_roll0901, all = TRUE))
str(merge(class_roll, class_roll0901, all = TRUE))
load("./red_and_black_180901_data.RData")
class_roll0901 <- class_roll
nrow(class_roll0901)
class_roll <- read.xlsx("../data/class_roll0904.xlsx",
sheetIndex = 1,
startRow = 2,
endRow = 164,
colIndex = c(3:7, 9),
colClasses = rep("character", 6),
encoding = "UTF-8",
stringsAsFactors = FALSE)
nrow(class_roll)
nrow(class_roll0901)
names(class_roll) <- c("dept", "id", "name", "year", "e.mail", "cell.no")
class_roll0901$mark1 <- "0901"
class_roll$mark2 <- "0904"
str(merge(class_roll, class_roll0901, all = TRUE))
N <- nrow(class_roll.new)
id_red <- sample(1:N, size = 9)
id_black <- setdiff(1:N, id_red)
N
id_red
id_black
1:N %in% id_red
ifelse(1:N %in% id_red, "Red", "Black")
factor(ifelse(1:N %in% id_red, "Red", "Black"), labels = c("Red", "Black"))
factor(ifelse(1:N %in% id_red, "Red", "Black"))
factor(ifelse(1:N %in% id_red, "Red", "Black"), levels = c("Red", "Black"))
factor(c("A", "A", "B"), labels = c("B", "A"))
factor(c("A", "A", "B"))
factor(c("A", "A", "B"), levels = c("B", "A"))
N_red <- table(class_roll.out$group)[1]
N_red
table(class_roll.out$group)
table(class_roll.out$group)$"Red"
str(table(class_roll.out$group))
